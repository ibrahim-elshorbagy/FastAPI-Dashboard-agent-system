{% from "layout/components/link.html" import sidebar_link, sidebar_sublink %}
{% from "layout/components/submenu.html" import submenu %}
<!-- This allows screen readers to skip the sidebar and go directly to the main content. -->
<a class="sr-only" href="#main-content">skip to the main content</a>
<!-- dark overlay for when the sidebar is open on smaller screens  -->
<div x-cloak
     x-show="showSidebar"
     class="fixed inset-0 z-10 bg-zinc-900/10 backdrop-blur-xs md:hidden"
     aria-hidden="true"
     x-on:click="showSidebar = false"
     x-transition.opacity></div>
<nav x-cloak
     class="fixed left-0 z-20 flex h-svh w-60 shrink-0 flex-col border-r border-slate-200 bg-white p-4 transition-transform duration-300 md:w-64 md:translate-x-0 md:relative shadow-lg"
     x-bind:class="showSidebar ? 'translate-x-0' : '-translate-x-60'"
     aria-label="sidebar navigation">
  <!-- homepage and logo -->
  <div class="flex flex-col items-center gap-4 mb-6">
    <!-- Logo image -->
    <div class="w-16 h-16 flex items-center justify-center">
      <img height="full"
           width="full"
           src="{{ url_for('static', path='images/settings/logo.png') }}"
           alt="Company Logo"
           class="max-w-full max-h-full object-contain" />
    </div>
  </div>
  <!-- sidebar links  -->
  <div class="flex flex-col gap-2 overflow-y-auto pb-6">
    {# Dashboard Link #}
    {{ sidebar_link(
        href="/",
        icon='<i class="fa-solid fa-gauge shrink-0"></i>',
        text="Dashboard",
        is_active=active_menu == "dashboard"
    ) }}

    {# Email Management #}
    {% call submenu(
        id="emails",
        title="Emails",
        icon='<i class="fa-solid fa-envelope shrink-0"></i>',
        is_active=active_menu == "emails"
    ) %}
        {{ sidebar_sublink(
            href="/emails/inbox",
            icon='<i class="fa-solid fa-inbox shrink-0"></i>',
            text="Inbox",
            is_active=active_submenu == "inbox"
        ) }}
        {{ sidebar_sublink(
            href="/emails/sent",
            icon='<i class="fa-solid fa-paper-plane shrink-0"></i>',
            text="Sent",
            is_active=active_submenu == "sent"
        ) }}
        {{ sidebar_sublink(
            href="/emails/draft",
            icon='<i class="fa-solid fa-file shrink-0"></i>',
            text="Draft",
            is_active=active_submenu == "draft"
        ) }}
        {{ sidebar_sublink(
            href="/emails/spam",
            icon='<i class="fa-solid fa-ban shrink-0"></i>',
            text="Spam",
            is_active=active_submenu == "spam"
        ) }}
        {{ sidebar_sublink(
          href="/emails/bin",
          icon='<i class="fa-solid fa-trash-can shrink-0"></i>',
          text="Bin",
          is_active=active_submenu == "bin"
      ) }}
    {% endcall %}

    {# HR Management #}
    {% call submenu(
        id="hr",
        title="HR Management",
        icon='<i class="fa-solid fa-users shrink-0"></i>',
        is_active=active_menu == "hr"
    ) %}
      {{ sidebar_sublink(
        href="/hr",
        icon='<i class="fa-solid fa-gauge shrink-0"></i>',
        text="HR Management",
        is_active=active_submenu == "hr"
    ) }}
    {% endcall %}

    {# Reports Management #}
    {% call submenu(
        id="reports",
        title="Reports Management",
        icon='<i class="fa-solid fa-chart-bar shrink-0"></i>',
        is_active=active_menu == "reports"
    ) %}
    {{ sidebar_sublink(
          href="/reports",
          icon='<i class="fa-solid fa-gauge shrink-0"></i>',
          text="Reports Management",
          is_active=active_submenu == "reports"
      ) }}
    {% endcall %}

    {# Settings Link #}
    {{ sidebar_link(
        href="/settings",
        icon='<i class="fa-solid fa-gear shrink-0"></i>',
        text="Settings",
        is_active=active_menu == "settings"
    ) }}
  </div>
</nav>
